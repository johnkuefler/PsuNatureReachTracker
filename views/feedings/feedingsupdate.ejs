<!DOCTYPE html>
<html>
<%- include('../partials/header', {title: 'Nature Reach - Update Feeding' }); %>

    <body>
        <% include ../partials/navbar %>
            <div class="container">
                <br>
                <h1 class="ml-3">
                    <%= title %>
                </h1>
                <p class="ml-3">Update a Feeding in the database</p>
                <form method="POST" action="/feedings/update">
                    <input type="hidden" name="id" value="<%= data._id %>" />

                    <div class="form-group col-md-4 col-sm-12">
                        <label>Animal (Required)</label>
                        <select required class="form-control" name="Bird">
                            <option>
                                <%=data.Bird%>
                            </option>
                            <% for(var i=0; i<birds.length; i++) { %>
                                <option value="<%=birds[i].nickName%> - <%=birds[i].species%>">
                                    <%=birds[i].nickName%> - <%=birds[i].species%>
                                </option>
                                <% } %>
                        </select>
                    </div>

                    <div class="form-group col-md-4 col-sm-12">
                        <label>Food (Optional)</label><br>
                            <% for(var i=0; i<foods.length; i++) { %>
                                <% if (feedingFoods.find(food =>food == foods[i].name)) { %>
                                    <input type="checkbox" value="<%=foods[i].name%>" name="Food" checked/> <%=foods[i].name%><br>
                                <% } else { %>
                                    <input type="checkbox" value="<%=foods[i].name%>" name="Food"/> <%=foods[i].name%><br>
                                <% } %>
                            <% } %>
                    </div>

                    <div class="form-group col-md-4 col-sm-12">
                        <label>Amount Fed (g) (Optional)</label>
                        <input type="text" class="form-control" name="AmountFed" value="<%= data.AmountFed %>">
                    </div>

                    <div class="form-group col-md-4 col-sm-12">
                        <label>Leftover Food (g) (Optional)</label>
                        <input type="text" class="form-control" name="LeftoverFood"
                            value="<%= data.LeftoverFood %>">
                    </div>

                    <div class="form-group col-md-4 col-sm-12">
                        <label>Medicine (Optional)</label><br>
                            <% for(var i=0; i<meds.length; i++) { %>
                                <% if (feedingMedicines.find(med =>med == meds[i].name)) { %>
                                    <input type="checkbox" value="<%=meds[i].name%>" name="Medicine" checked/> <%=meds[i].name%><br>
                                <% } else { %>
                                    <input type="checkbox" value="<%=meds[i].name%>" name="Medicine"/> <%=meds[i].name%><br>
                                <% } %>
                            <% } %>
                    </div>

                    <div class="form-group col-md-4 col-sm-12">
                        <label>Goal Weight (g) (Optional)</label>
                        <input type="text" class="form-control" name="GoalWeight"
                            value="<%= data.GoalWeight %>">
                    </div>

                    <div class="form-group col-md-4 col-sm-12">
                        <label>Actual Weight (g) (Optional)</label>
                        <input type="text" class="form-control" name="ActualWeight"
                            value="<%= data.ActualWeight %>">
                    </div>

                    <div class="form-group col-md-4 col-sm-12">
                        <label>Weather Conditions (Optional)</label>
                        <select class="form-control" name="WeatherConditions">
                            <option>
                                <%= data.WeatherConditions %>
                            </option>
                            <option value="Sunny">Sunny</option>
                            <option value="Cloudy">Cloudy</option>
                            <option value="Rainy">Rainy</option>
                            <option value="Snowy">Snowy</option>
                        </select>
                    </div>

                    <div class="form-group col-md-4 col-sm-12">
                        <label>Daily High Temperature (°F) (Optional)</label>
                        <input type="text" class="form-control" name="DailyHighTemperature" value="<%= data.DailyHighTemperature %>">
                    </div>
    
                    <div class="form-group col-md-4 col-sm-12">
                        <label>Daily Low Temperature (°F) (Optional)</label>
                        <input type="text" class="form-control" name="DailyLowTemperature" value="<%= data.DailyLowTemperature %>">
                    </div>

                    <div class="form-group col-md-4 col-sm-12">
                        <label>General Comments (Optional)</label>
                        <textarea id="generalComments" type="text" wrap="soft" class="form-control"
                            name="GeneralComments"><%= data.GeneralComments %></textarea>
                    </div>

                    <div class="form-group col-md-4 col-sm-12">
                        <label>Training Comments (Optional)</label>
                        <textarea id="trainingComments" type="text" class="form-control"
                            name="TrainingComments"><%= data.TrainingComments %></textarea>
                    </div>

                    <div class="form-group col-md-4 col-sm-12">
                        <label>Date & Time (Required)</label>
                        <div class="input-group date" id="datetimepicker" data-target-input="nearest">
                            <input type="text" class="form-control datetimepicker-input" data-target="#datetimepicker" name="Date" required/>
                            <div class="input-group-append" data-target="#datetimepicker" data-toggle="datetimepicker">
                                <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                            </div>
                        </div>
                    </div>

                    <div class="form-group col-md-4 col-sm-12">
                        <button type="submit" class="btn btn-primary">Submit</button>
                    </div>


                </form>
            </div>
            <% include ../partials/scripts %>

                <script type="text/javascript">
                        $(function () {
                            $('#datetimepicker').datetimepicker('date',new Date('<%= data.Date %>').toLocaleDateString("en-US", { hour: '2-digit' , minute: '2-digit', timeZone: "UTC" }) );
                        });
                </script>



    </body>

</html>